ML System design кейс

Компания **«CityRide»** — крупный каршеринг в нескольких городах России. Растут инциденты (ДТП, штрафы, жалобы) и расходы на ремонт. Нужно ML‑решение, которое вблизи реалтайма оценивает риск поездки и позволяет: блокировать опасные поездки, ограничивать функциональность и делать оффлайн‑аналитику по рисковому поведению.​

Функциональные требования:

- Прием телеметрии и событий из приложения, формирование фичей.
- Два контура:
    
    - Online‑скоринг при старте
    - Offline‑скоринг для обучения и аналитики.
        
- Выдача скоров риска с настраиваемыми порогами.
- Логирование запросов 
- Управление версиями моделей
- Дашборды по качеству

Нефункциональные требования:

- Online‑скоринг: ≥ 500 RPS, средняя латентность ≤ 100 мс, p95 ≤ 150 мс.
- Доступность контура скоринга ≥ 99.9% в месяц.
- Защита персональных данных (анонимизация, шифрование, контроль доступа).​
- Наблюдаемость: метрики, логи, трассировка, алерты по SLO.
    

Задача:  
Спроектировать ML‑систему скоринга риска поездок:

- Сформулировать бизнес‑ и ML‑цели, таргет и метрики.
- Предложить схему данных и фичей (источники, offline/online feature store, окна).
- Описать архитектуру компонентов и потоков данных для online/offline.
- Описать MLOps: обучение, деплой, версии, эксперименты, мониторинг деградации.
